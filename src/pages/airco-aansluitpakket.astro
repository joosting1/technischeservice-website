---
import Layout from '../layouts/Layout.astro';
import Breadcrumbs from '../components/Breadcrumbs.astro';
---

<Layout 
  title="Airco Aansluitpakket Configurator - Voor Doe-Het-Zelvers | Technische Service Assen" 
  description="Configureer uw complete airco aansluitpakket. Kies afstand, kabelgoot kleur en aantal units. Inclusief in bedrijfstelling. Vanaf ‚Ç¨225."
  background="/assets/afbeeldingupload/responsive/daikin-in bedrijfstelling-groningen-1440w.avif" 
  withOverlay
>
  <!-- Hero Section with Calculator Preview -->
  <section class="hc-hero hero-left hero-spacious">
    <div class="hc-container">
      <Breadcrumbs items={[{ name: 'Home', href: '/' }, { name: 'Airco', href: '/airco-installatie' }, { name: 'Aansluitpakket' }]} />
      <div class="hero-grid">
        <div class="hero-content">
          <span class="hero-eyebrow">Doe-Het-Zelf Pakket</span>
          <h1 class="hc-title">Airco Aansluitpakket</h1>
          <p class="hero-subtitle">Complete doe-het-zelf aansluitset voor uw airco installatie. Inclusief alle materialen en professionele in bedrijfstelling.</p>
          <div class="flex items-center gap-3">
            <div class="flex gap-1">
              {[1,2,3,4,5].map(() => (
                <svg class="w-5 h-5 text-yellow-400 fill-current" viewBox="0 0 20 20">
                  <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/>
                </svg>
              ))}
            </div>
            <span class="text-white text-sm">BRL-100 Gecertificeerd</span>
          </div>
        </div>
        <div class="hero-image">
          <!-- Calculator Preview Card -->
          <div class="bg-gradient-to-br from-slate-800/90 to-slate-900/90 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6 shadow-2xl">
            <div class="text-center mb-6">
              <div class="text-5xl mb-3">üîß</div>
              <h3 class="text-xl font-bold text-white mb-2">Bereken Uw Pakket</h3>
              <p class="text-slate-300 text-sm">Vanaf ‚Ç¨225,- inclusief IBS</p>
            </div>
            <div class="space-y-3 mb-6">
              <div class="flex items-center gap-3 p-3 bg-slate-700/30 rounded-lg">
                <div class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-white font-bold text-sm">1</div>
                <div class="flex-1">
                  <span class="text-white text-sm block">Kies afstand</span>
                  <span class="text-slate-400 text-xs">3m, 5m of 7m</span>
                </div>
              </div>
              <div class="flex items-center gap-3 p-3 bg-slate-700/20 rounded-lg opacity-60">
                <div class="w-8 h-8 rounded-full bg-slate-600 flex items-center justify-center text-white font-bold text-sm">2</div>
                <div class="flex-1">
                  <span class="text-white text-sm block">Leidingmaat</span>
                  <span class="text-slate-400 text-xs">¬º" of ‚Öú"</span>
                </div>
              </div>
              <div class="flex items-center gap-3 p-3 bg-slate-700/20 rounded-lg opacity-60">
                <div class="w-8 h-8 rounded-full bg-slate-600 flex items-center justify-center text-white font-bold text-sm">3</div>
                <div class="flex-1">
                  <span class="text-white text-sm block">Opties</span>
                  <span class="text-slate-400 text-xs">Kabelgoot & units</span>
                </div>
              </div>
              <div class="flex items-center gap-3 p-3 bg-slate-700/20 rounded-lg opacity-60">
                <div class="w-8 h-8 rounded-full bg-slate-600 flex items-center justify-center text-white font-bold text-sm">4</div>
                <div class="flex-1">
                  <span class="text-white text-sm block">Contactgegevens</span>
                  <span class="text-slate-400 text-xs">Offerte aanvragen</span>
                </div>
              </div>
            </div>
            <div class="text-center">
              <div class="inline-flex items-center gap-2 text-sm text-slate-400">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
                </svg>
                <span>Scroll naar beneden om te starten</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Configurator Section -->
  <section class="py-16 bg-gradient-to-br from-slate-900 to-slate-800">
    <div class="hc-container max-w-6xl">
      
      <!-- Progress Bar -->
      <div class="mb-12">
        <div class="flex items-center justify-between mb-4">
          <div id="step-1" class="flex items-center gap-2 step-indicator active">
            <div class="step-number">1</div>
            <span class="step-label hidden sm:inline">Afstand</span>
          </div>
          <div class="flex-1 h-1 bg-slate-700 mx-2">
            <div id="progress-1" class="h-full bg-blue-500 transition-all duration-500" style="width: 0%"></div>
          </div>
          <div id="step-2" class="flex items-center gap-2 step-indicator">
            <div class="step-number">2</div>
            <span class="step-label hidden sm:inline">Leidingmaat</span>
          </div>
          <div class="flex-1 h-1 bg-slate-700 mx-2">
            <div id="progress-2" class="h-full bg-blue-500 transition-all duration-500" style="width: 0%"></div>
          </div>
          <div id="step-3" class="flex items-center gap-2 step-indicator">
            <div class="step-number">3</div>
            <span class="step-label hidden sm:inline">Opties</span>
          </div>
          <div class="flex-1 h-1 bg-slate-700 mx-2">
            <div id="progress-3" class="h-full bg-blue-500 transition-all duration-500" style="width: 0%"></div>
          </div>
          <div id="step-4" class="flex items-center gap-2 step-indicator">
            <div class="step-number">4</div>
            <span class="step-label hidden sm:inline">Contact</span>
          </div>
        </div>
      </div>

      <!-- Configurator Steps -->
      <div class="config-container">
        
        <!-- Step 1: Distance Selection -->
        <div id="config-step-1" class="config-step active">
          <h2 class="text-3xl font-bold text-white mb-6">Kies Uw Afstand</h2>
          <p class="text-slate-300 mb-8">Selecteer de benodigde leidinglengte</p>
          
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="config-option" data-value="3m" data-name="3 Meter Pakket" data-price="225">
              <div class="config-option-inner">
                <div class="text-4xl mb-4">üìè</div>
                <h3 class="text-2xl font-bold text-white mb-2">3 Meter</h3>
                <p class="text-slate-300 text-sm mb-4">Ideaal voor korte afstanden</p>
                <ul class="text-sm text-slate-400 space-y-2 mb-4">
                  <li>‚úì 3m koelleiding</li>
                  <li>‚úì 3m kabelgoot</li>
                  <li>‚úì Complete aansluitset</li>
                  <li>‚úì Montagemateriaal</li>
                </ul>
                <div class="text-2xl font-bold text-blue-400 mt-4">‚Ç¨225,-</div>
              </div>
            </div>

            <div class="config-option" data-value="5m" data-name="5 Meter Pakket" data-price="275">
              <div class="config-option-inner">
                <div class="text-4xl mb-4">üìê</div>
                <h3 class="text-2xl font-bold text-white mb-2">5 Meter</h3>
                <p class="text-slate-300 text-sm mb-4">Meest gekozen optie</p>
                <ul class="text-sm text-slate-400 space-y-2 mb-4">
                  <li>‚úì 5m koelleiding</li>
                  <li>‚úì 5m kabelgoot</li>
                  <li>‚úì Complete aansluitset</li>
                  <li>‚úì Montagemateriaal</li>
                </ul>
                <div class="text-2xl font-bold text-blue-400 mt-4">‚Ç¨275,-</div>
                <div class="mt-2 text-xs text-green-400 font-semibold">‚≠ê Populair</div>
              </div>
            </div>

            <div class="config-option" data-value="10m" data-name="10 Meter Pakket" data-price="475">
              <div class="config-option-inner">
                <div class="text-4xl mb-4">üìè</div>
                <h3 class="text-2xl font-bold text-white mb-2">10 Meter</h3>
                <p class="text-slate-300 text-sm mb-4">Voor grotere afstanden</p>
                <ul class="text-sm text-slate-400 space-y-2 mb-4">
                  <li>‚úì 10m koelleiding</li>
                  <li>‚úì 10m kabelgoot</li>
                  <li>‚úì Complete aansluitset</li>
                  <li>‚úì Montagemateriaal</li>
                </ul>
                <div class="text-2xl font-bold text-blue-400 mt-4">‚Ç¨475,-</div>
              </div>
            </div>
          </div>

          <div class="mt-8 flex justify-end">
            <button id="next-step-1" class="btn-configurator disabled" disabled>
              Volgende Stap ‚Üí
            </button>
          </div>
        </div>

        <!-- Step 2: Pipe Size Selection -->
        <div id="config-step-2" class="config-step">
          <h2 class="text-3xl font-bold text-white mb-6">Kies Leidingmaat</h2>
          <p class="text-slate-300 mb-8">Selecteer de juiste koelleiding diameter</p>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-3xl mx-auto">
            <div class="config-option" data-value="1/4-3/8" data-name='1/4" x 3/8"'>
              <div class="config-option-inner">
                <div class="text-4xl mb-4">üîß</div>
                <h3 class="text-xl font-bold text-white mb-2">1/4" x 3/8"</h3>
                <p class="text-slate-300 text-sm mb-4">Standaard maat</p>
                <ul class="text-sm text-slate-400 space-y-2 mb-4">
                  <li>‚úì Voor meeste airco's tot 3,5 kW</li>
                  <li>‚úì Standaard aansluitingen</li>
                  <li>‚úì Meest voorkomend</li>
                </ul>
              </div>
            </div>

            <div class="config-option" data-value="1/4-1/2" data-name='1/4" x 1/2"'>
              <div class="config-option-inner">
                <div class="text-4xl mb-4">üî©</div>
                <h3 class="text-xl font-bold text-white mb-2">1/4" x 1/2"</h3>
                <p class="text-slate-300 text-sm mb-4">Grotere capaciteit</p>
                <ul class="text-sm text-slate-400 space-y-2 mb-4">
                  <li>‚úì Voor airco's vanaf 3,5 kW</li>
                  <li>‚úì Zwaardere units</li>
                  <li>‚úì Hogere capaciteit</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="mt-8 flex justify-between">
            <button id="prev-step-2" class="btn-configurator-outline">
              ‚Üê Vorige
            </button>
            <button id="next-step-2" class="btn-configurator disabled" disabled>
              Volgende Stap ‚Üí
            </button>
          </div>
        </div>

        <!-- Step 3: Options -->
        <div id="config-step-3" class="config-step">
          <h2 class="text-3xl font-bold text-white mb-6">Aanvullende Opties</h2>
          <p class="text-slate-300 mb-8">Maak uw pakket compleet</p>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Kabelgoot Kleur -->
            <div class="bg-gradient-to-br from-slate-800 to-slate-700 rounded-xl p-6 border border-slate-600">
              <h3 class="text-xl font-bold text-white mb-4">üé® Kabelgoot Kleur</h3>
              <div class="space-y-3">
                <label class="flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-slate-600/50 transition-colors">
                  <input type="radio" name="kabelgoot" value="wit" data-name="Kabelgoot Wit" checked class="w-5 h-5" />
                  <div class="flex items-center gap-3 flex-1">
                    <div class="w-8 h-8 rounded bg-white border-2 border-slate-400"></div>
                    <span class="text-slate-200 font-medium">Wit</span>
                  </div>
                  <span class="text-slate-400 text-sm">Standaard</span>
                </label>
                <label class="flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-slate-600/50 transition-colors">
                  <input type="radio" name="kabelgoot" value="antraciet" data-name="Kabelgoot Antraciet" class="w-5 h-5" />
                  <div class="flex items-center gap-3 flex-1">
                    <div class="w-8 h-8 rounded bg-gray-700 border-2 border-slate-400"></div>
                    <span class="text-slate-200 font-medium">Antraciet</span>
                  </div>
                  <span class="text-slate-400 text-sm">+‚Ç¨0</span>
                </label>
              </div>
            </div>

            <!-- Montage Type -->
            <div class="bg-gradient-to-br from-slate-800 to-slate-700 rounded-xl p-6 border border-slate-600">
              <h3 class="text-xl font-bold text-white mb-4">üîß Montage Beugel</h3>
              <div class="space-y-3">
                <label class="flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-slate-600/50 transition-colors">
                  <input type="radio" name="beugel" value="muurbeugel" data-name="Muurbeugel" checked class="w-5 h-5" />
                  <div class="flex-1">
                    <span class="text-slate-200 font-medium block">Muurbeugel</span>
                    <span class="text-slate-400 text-xs">Voor wandmontage</span>
                  </div>
                </label>
                <label class="flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-slate-600/50 transition-colors">
                  <input type="radio" name="beugel" value="bigfoot" data-name="Big Foot" class="w-5 h-5" />
                  <div class="flex-1">
                    <span class="text-slate-200 font-medium block">Big Foot</span>
                    <span class="text-slate-400 text-xs">Voor plaatsing op dak/grond</span>
                  </div>
                </label>
              </div>
            </div>

            <!-- Multisplit -->
            <div class="config-option-checkbox" data-value="multisplit" data-name="Multisplit Extra Units" data-price="175">
              <div class="config-option-inner">
                <div class="flex items-start gap-4">
                  <div class="text-4xl">üè¢</div>
                  <div class="flex-1">
                    <h3 class="text-xl font-bold text-white mb-2">Multisplit Extra Binnenunits</h3>
                    <p class="text-slate-300 text-sm mb-3">Meerprijs per extra binnenunit bij multisplit systemen</p>
                    <div class="bg-blue-500/10 border border-blue-500/30 rounded-lg p-3 mb-3">
                      <p class="text-blue-200 text-sm">
                        <strong>Let op:</strong> Deze optie is alleen van toepassing als u meerdere binnenunits heeft. Per extra binnenunit wordt ‚Ç¨175,- berekend.
                      </p>
                    </div>
                    <div class="flex items-center gap-4">
                      <label class="text-slate-300 text-sm font-medium">Aantal extra units:</label>
                      <input 
                        type="number" 
                        id="multisplit-units" 
                        min="0" 
                        max="5" 
                        value="0" 
                        class="w-20 px-3 py-2 bg-slate-900 border border-slate-600 rounded text-white text-center"
                      />
                    </div>
                    <div class="mt-3 font-semibold text-blue-400">‚Ç¨175,- per extra unit</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- In bedrijfstelling -->
            <div class="config-option-checkbox" data-value="inbedrijfstelling" data-name="Professionele In Bedrijfstelling" data-price="200">
              <div class="config-option-inner">
                <div class="flex items-start gap-4">
                  <div class="text-4xl">‚öôÔ∏è</div>
                  <div class="flex-1">
                    <h3 class="text-xl font-bold text-white mb-2">Professionele In Bedrijfstelling</h3>
                    <p class="text-slate-300 text-sm mb-3">Laat de airco vakkundig in bedrijf stellen door onze BRL-100 gecertificeerde installateurs</p>
                    <div class="bg-green-500/10 border border-green-500/30 rounded-lg p-3 mb-3">
                      <p class="text-green-200 text-sm">
                        <strong>Aanbevolen:</strong> Voor optimale werking en garantie adviseren wij altijd professionele in bedrijfstelling. Dit omvat vacu√ºmtrekken, lekkagetest en eerste opstart.
                      </p>
                    </div>
                    <ul class="text-sm text-slate-300 space-y-1 mb-3">
                      <li>‚úì Vacu√ºmpomp behandeling</li>
                      <li>‚úì Lekkagetest</li>
                      <li>‚úì Eerste opstart & controle</li>
                      <li>‚úì Uitleg bediening</li>
                    </ul>
                    <div class="mt-3 font-semibold text-green-400">‚Ç¨200,-</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="mt-8 flex justify-between">
            <button id="prev-step-3" class="btn-configurator-outline">
              ‚Üê Vorige
            </button>
            <button id="next-step-3" class="btn-configurator">
              Volgende Stap ‚Üí
            </button>
          </div>
        </div>

        <!-- Step 4: Contact Form -->
        <div id="config-step-4" class="config-step">
          <h2 class="text-3xl font-bold text-white mb-6">Uw Bestelling Afronden</h2>
          
          <!-- Summary -->
          <div class="bg-gradient-to-br from-blue-500/10 to-blue-600/10 border border-blue-500/30 rounded-xl p-6 mb-8">
            <h3 class="text-xl font-bold text-white mb-4">Uw Aansluitpakket:</h3>
            <div id="configuration-summary" class="space-y-2 text-slate-300"></div>
            <div class="border-t border-blue-500/30 mt-4 pt-4">
              <div class="flex justify-between items-center text-lg text-white">
                <span>Subtotaal Pakket:</span>
                <span id="subtotal-price" class="text-slate-300">‚Ç¨0,-</span>
              </div>
              <div class="flex justify-between items-center text-lg text-white mt-2">
                <span>Verzendkosten:</span>
                <span class="text-slate-300">‚Ç¨15,-</span>
              </div>
              <div class="border-t border-blue-500/30 mt-3 pt-3 flex justify-between items-center text-2xl font-bold text-white">
                <span>Totale Prijs:</span>
                <span id="total-price" class="text-blue-400">‚Ç¨0,-</span>
              </div>
              <p class="text-sm text-slate-400 mt-2">* Inclusief BTW en verzendkosten</p>
            </div>
          </div>

          <!-- What's Included -->
          <div class="bg-gradient-to-br from-slate-800 to-slate-700 rounded-xl p-6 border border-slate-600 mb-8">
            <h3 class="text-lg font-bold text-white mb-4">‚úÖ Standaard inbegrepen in elk pakket:</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-slate-300">
              <div class="flex items-start gap-2">
                <span class="text-green-400">‚úì</span>
                <span>Koelleiding (gekozen maat)</span>
              </div>
              <div class="flex items-start gap-2">
                <span class="text-green-400">‚úì</span>
                <span>Kabelgoot (wit of antraciet)</span>
              </div>
              <div class="flex items-start gap-2">
                <span class="text-green-400">‚úì</span>
                <span>Eindkap kabelgoot</span>
              </div>
              <div class="flex items-start gap-2">
                <span class="text-green-400">‚úì</span>
                <span>Muurbeugel of Big Foot</span>
              </div>
              <div class="flex items-start gap-2">
                <span class="text-green-400">‚úì</span>
                <span>Communicatiekabel</span>
              </div>
              <div class="flex items-start gap-2">
                <span class="text-green-400">‚úì</span>
                <span>Elektrakabel</span>
              </div>
              <div class="flex items-start gap-2">
                <span class="text-green-400">‚úì</span>
                <span>Werkschakelaar</span>
              </div>
              <div class="flex items-start gap-2">
                <span class="text-green-400">‚úì</span>
                <span>Gratis verzending (‚Ç¨15,-)</span>
              </div>
            </div>
            <div class="mt-4 pt-4 border-t border-slate-600">
              <p class="text-sm text-slate-300">
                <strong class="text-blue-400">üí° Let op:</strong> Professionele in bedrijfstelling is optioneel en kan worden toegevoegd in stap 3 voor ‚Ç¨200,-
              </p>
            </div>
          </div>

          <!-- Contact Form -->
          <form id="configurator-form" class="space-y-6">
            <!-- Hidden service field for API -->
            <input type="hidden" name="service" value="Airco Aansluitpakket Bestelling" />
            
            <div class="bg-green-500/10 border border-green-500/30 rounded-lg p-4 text-sm text-green-200">
              <strong>ÔøΩ Bestel uw pakket:</strong> Vul uw gegevens in en wij nemen contact met u op voor levering en planning van de in bedrijfstelling!
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-semibold text-slate-300 mb-2">Voornaam *</label>
                <input 
                  type="text" 
                  name="voornaam" 
                  required 
                  class="w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                />
              </div>
              <div>
                <label class="block text-sm font-semibold text-slate-300 mb-2">Achternaam *</label>
                <input 
                  type="text" 
                  name="achternaam" 
                  required 
                  class="w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                />
              </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-semibold text-slate-300 mb-2">Email *</label>
                <input 
                  type="email" 
                  name="email" 
                  required 
                  class="w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                />
              </div>
              <div>
                <label class="block text-sm font-semibold text-slate-300 mb-2">Telefoon *</label>
                <input 
                  type="tel" 
                  name="telefoon" 
                  required 
                  class="w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                />
              </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-semibold text-slate-300 mb-2">Adres *</label>
                <input 
                  type="text" 
                  name="adres" 
                  required 
                  placeholder="Straat + huisnummer"
                  class="w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                />
              </div>
              <div>
                <label class="block text-sm font-semibold text-slate-300 mb-2">Postcode *</label>
                <input 
                  type="text" 
                  name="postcode" 
                  required 
                  placeholder="1234AB"
                  class="w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                />
              </div>
            </div>

            <div>
              <label class="block text-sm font-semibold text-slate-300 mb-2">Woonplaats *</label>
              <input 
                type="text" 
                name="woonplaats" 
                required 
                class="w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              />
            </div>

            <div>
              <label class="block text-sm font-semibold text-slate-300 mb-2">Opmerkingen / Vragen</label>
              <textarea 
                name="opmerkingen" 
                rows="4" 
                class="w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
                placeholder="Bijvoorbeeld: Wanneer wilt u de in bedrijfstelling gepland hebben?"
              ></textarea>
            </div>

            <div>
              <label class="flex items-start gap-3 cursor-pointer">
                <input 
                  type="checkbox" 
                  name="privacy" 
                  required 
                  class="w-5 h-5 mt-0.5 text-blue-600 rounded"
                />
                <span class="text-sm text-slate-300">
                  Ik ga akkoord met de <a href="/privacy" class="text-blue-400 hover:text-blue-300 underline" target="_blank">privacyverklaring</a> en geef toestemming om contact met mij op te nemen. *
                </span>
              </label>
            </div>

            <div class="flex gap-4">
              <button type="button" id="prev-step-4" class="btn-configurator-outline">
                ‚Üê Vorige
              </button>
              <button 
                type="submit"
                class="flex-1 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold px-8 py-4 rounded-lg transition-all duration-300 hover:shadow-lg hover:shadow-green-500/50"
              >
                ÔøΩ Bestelling Plaatsen
              </button>
            </div>
          </form>

          <!-- Success Message (hidden by default) -->
          <div id="success-message" class="hidden text-center py-12">
            <div class="text-6xl mb-4">‚úÖ</div>
            <h3 class="text-2xl font-bold text-white mb-4">Bestelling Succesvol Ontvangen!</h3>
            <p class="text-slate-300 mb-6">
              Bedankt voor uw bestelling! We hebben uw aanvraag ontvangen en nemen binnen 24 uur contact met u op voor de levering en planning van de professionele in bedrijfstelling.
            </p>
            <a href="/airco-installatie" class="inline-block bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold px-8 py-3 rounded-lg transition-all">
              Terug naar Airco Installatie
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <style>
    .config-container {
      position: relative;
      min-height: 600px;
    }

    .config-step {
      display: none;
      animation: fadeIn 0.4s ease-in-out;
    }

    .config-step.active {
      display: block;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .step-indicator {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      opacity: 0.5;
      transition: all 0.3s;
    }

    .step-indicator.active {
      opacity: 1;
    }

    .step-indicator.completed {
      opacity: 0.8;
    }

    .step-number {
      width: 2.5rem;
      height: 2.5rem;
      border-radius: 50%;
      background: linear-gradient(135deg, #1e293b, #0f172a);
      border: 2px solid #475569;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: #94a3b8;
      transition: all 0.3s;
    }

    .step-indicator.active .step-number {
      background: linear-gradient(135deg, #3b82f6, #2563eb);
      border-color: #3b82f6;
      color: white;
      box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
    }

    .step-indicator.completed .step-number {
      background: linear-gradient(135deg, #10b981, #059669);
      border-color: #10b981;
      color: white;
    }

    .config-option {
      cursor: pointer;
      transition: all 0.3s;
      border-radius: 1rem;
      overflow: hidden;
    }

    .config-option-inner {
      padding: 2rem;
      background: linear-gradient(135deg, rgba(30, 41, 59, 0.8), rgba(15, 23, 42, 0.9));
      border: 2px solid rgba(71, 85, 105, 0.5);
      border-radius: 1rem;
      height: 100%;
      transition: all 0.3s;
      text-align: center;
    }

    .config-option:hover .config-option-inner {
      border-color: rgba(59, 130, 246, 0.5);
      transform: translateY(-4px);
      box-shadow: 0 10px 30px rgba(59, 130, 246, 0.2);
    }

    .config-option.selected .config-option-inner {
      border-color: #3b82f6;
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(37, 99, 235, 0.15));
      box-shadow: 0 0 30px rgba(59, 130, 246, 0.3);
    }

    .config-option-checkbox {
      cursor: pointer;
      transition: all 0.3s;
      border-radius: 1rem;
      overflow: hidden;
    }

    .config-option-checkbox .config-option-inner {
      padding: 1.5rem;
      background: linear-gradient(135deg, rgba(30, 41, 59, 0.8), rgba(15, 23, 42, 0.9));
      border: 2px solid rgba(71, 85, 105, 0.5);
      border-radius: 1rem;
      transition: all 0.3s;
      position: relative;
    }

    .config-option-checkbox:hover .config-option-inner {
      border-color: rgba(59, 130, 246, 0.5);
      box-shadow: 0 5px 20px rgba(59, 130, 246, 0.15);
    }

    .config-option-checkbox.selected .config-option-inner {
      border-color: #10b981;
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.1));
      box-shadow: 0 0 20px rgba(16, 185, 129, 0.2);
    }

    .config-option-checkbox.selected .config-option-inner::before {
      content: '‚úì';
      position: absolute;
      top: 1rem;
      right: 1rem;
      width: 2rem;
      height: 2rem;
      background: linear-gradient(135deg, #10b981, #059669);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 1.2rem;
    }

    .btn-configurator {
      background: linear-gradient(90deg, #3b82f6, #2563eb);
      color: white;
      font-weight: 600;
      padding: 0.875rem 2rem;
      border-radius: 0.75rem;
      border: none;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 4px 14px rgba(59, 130, 246, 0.4);
    }

    .btn-configurator:hover:not(.disabled) {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.5);
    }

    .btn-configurator.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .btn-configurator-outline {
      background: transparent;
      color: #94a3b8;
      font-weight: 600;
      padding: 0.875rem 2rem;
      border-radius: 0.75rem;
      border: 2px solid #475569;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-configurator-outline:hover {
      border-color: #64748b;
      color: #cbd5e1;
    }
  </style>

  <script>
    // Configuration state
    const config = {
      distance: null,
      distanceName: '',
      pipeSize: null,
      pipeSizeName: '',
      kabelgoot: 'wit',
      kabelgootName: 'Kabelgoot Wit',
      beugel: 'muurbeugel',
      beugelName: 'Muurbeugel',
      multisplitUnits: 0,
      inbedrijfstelling: false,
      basePrice: 0,
      currentStep: 1
    };

    // Price mapping
    const prices = {
      '3m': 225,
      '5m': 275,
      '10m': 475,
      multisplit: 175,
      inbedrijfstelling: 200,
      shipping: 15  // Verzendkosten
    };

    // Step navigation
    function goToStep(step) {
      // Hide all steps
      document.querySelectorAll('.config-step').forEach(s => s.classList.remove('active'));
      // Show target step
      document.getElementById(`config-step-${step}`).classList.add('active');
      
      // Update progress indicators
      document.querySelectorAll('.step-indicator').forEach((indicator, index) => {
        const stepNum = index + 1;
        indicator.classList.remove('active', 'completed');
        if (stepNum === step) {
          indicator.classList.add('active');
        } else if (stepNum < step) {
          indicator.classList.add('completed');
        }
      });

      // Update progress bars
      for (let i = 1; i <= 3; i++) {
        const progress = document.getElementById(`progress-${i}`);
        if (progress) {
          progress.style.width = step > i ? '100%' : '0%';
        }
      }

      config.currentStep = step;
      
      // Scroll to configurator section smoothly, not to top
      const configSection = document.querySelector('.config-container');
      if (configSection) {
        const headerHeight = 80; // Height of fixed header
        const targetPosition = configSection.offsetTop - headerHeight;
        window.scrollTo({ top: targetPosition, behavior: 'smooth' });
      }
    }

    // Step 1: Distance selection
    document.querySelectorAll('#config-step-1 .config-option').forEach(option => {
      option.addEventListener('click', function() {
        document.querySelectorAll('#config-step-1 .config-option').forEach(opt => opt.classList.remove('selected'));
        this.classList.add('selected');
        
        config.distance = this.dataset.value;
        config.distanceName = this.dataset.name;
        config.basePrice = parseInt(this.dataset.price);
        
        document.getElementById('next-step-1').classList.remove('disabled');
        document.getElementById('next-step-1').disabled = false;
      });
    });

    document.getElementById('next-step-1').addEventListener('click', () => {
      if (config.distance) goToStep(2);
    });

    // Step 2: Pipe size selection
    document.querySelectorAll('#config-step-2 .config-option').forEach(option => {
      option.addEventListener('click', function() {
        document.querySelectorAll('#config-step-2 .config-option').forEach(opt => opt.classList.remove('selected'));
        this.classList.add('selected');
        
        config.pipeSize = this.dataset.value;
        config.pipeSizeName = this.dataset.name;
        
        document.getElementById('next-step-2').classList.remove('disabled');
        document.getElementById('next-step-2').disabled = false;
      });
    });

    document.getElementById('prev-step-2').addEventListener('click', () => goToStep(1));
    document.getElementById('next-step-2').addEventListener('click', () => {
      if (config.pipeSize) goToStep(3);
    });

    // Step 3: Options
    // Kabelgoot
    document.querySelectorAll('input[name="kabelgoot"]').forEach(radio => {
      radio.addEventListener('change', function() {
        config.kabelgoot = this.value;
        config.kabelgootName = this.dataset.name;
      });
    });

    // Beugel
    document.querySelectorAll('input[name="beugel"]').forEach(radio => {
      radio.addEventListener('change', function() {
        config.beugel = this.value;
        config.beugelName = this.dataset.name;
      });
    });

    // Multisplit units
    document.getElementById('multisplit-units').addEventListener('change', function() {
      config.multisplitUnits = parseInt(this.value) || 0;
    });

    // In bedrijfstelling checkbox
    document.querySelectorAll('.config-option-checkbox[data-value="inbedrijfstelling"]').forEach(option => {
      option.addEventListener('click', function() {
        const isSelected = this.classList.contains('selected');
        if (isSelected) {
          this.classList.remove('selected');
          config.inbedrijfstelling = false;
        } else {
          this.classList.add('selected');
          config.inbedrijfstelling = true;
        }
      });
    });

    document.getElementById('prev-step-3').addEventListener('click', () => goToStep(2));
    document.getElementById('next-step-3').addEventListener('click', () => {
      updateSummary();
      goToStep(4);
    });

    // Step 4: Summary and form
    function updateSummary() {
      const summary = document.getElementById('configuration-summary');
      let subtotal = config.basePrice;
      
      let html = `
        <div class="flex justify-between py-2">
          <span>Pakket:</span>
          <strong>${config.distanceName}</strong>
        </div>
        <div class="flex justify-between py-2">
          <span>Leidingmaat:</span>
          <strong>${config.pipeSizeName}</strong>
        </div>
        <div class="flex justify-between py-2">
          <span>Kabelgoot:</span>
          <strong>${config.kabelgootName}</strong>
        </div>
        <div class="flex justify-between py-2">
          <span>Montage:</span>
          <strong>${config.beugelName}</strong>
        </div>
      `;
      
      if (config.multisplitUnits > 0) {
        const multisplitPrice = config.multisplitUnits * prices.multisplit;
        subtotal += multisplitPrice;
        html += `
          <div class="flex justify-between py-2 text-blue-300">
            <span>Multisplit (${config.multisplitUnits}x extra unit):</span>
            <strong>+‚Ç¨${multisplitPrice},-</strong>
          </div>
        `;
      }
      
      if (config.inbedrijfstelling) {
        subtotal += prices.inbedrijfstelling;
        html += `
          <div class="flex justify-between py-2 text-green-300">
            <span>Professionele In Bedrijfstelling:</span>
            <strong>+‚Ç¨${prices.inbedrijfstelling},-</strong>
          </div>
        `;
      }
      
      const totalPrice = subtotal + prices.shipping;
      
      summary.innerHTML = html;
      document.getElementById('subtotal-price').textContent = `‚Ç¨${subtotal},-`;
      document.getElementById('total-price').textContent = `‚Ç¨${totalPrice},-`;
    }

    document.getElementById('prev-step-4').addEventListener('click', () => goToStep(3));

    // Form submission
    document.getElementById('configurator-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const formData = new FormData(e.target);
      const data = Object.fromEntries(formData.entries());
      
      // Add configuration to data
      let subtotal = config.basePrice + (config.multisplitUnits * prices.multisplit);
      if (config.inbedrijfstelling) {
        subtotal += prices.inbedrijfstelling;
      }
      const totalPrice = subtotal + prices.shipping;
      
      data.configuration = {
        distance: config.distanceName,
        pipeSize: config.pipeSizeName,
        kabelgoot: config.kabelgootName,
        beugel: config.beugelName,
        multisplitUnits: config.multisplitUnits,
        inbedrijfstelling: config.inbedrijfstelling,
        subtotal: subtotal,
        shipping: prices.shipping,
        totalPrice: totalPrice
      };
      
      data.subject = `Airco Aansluitpakket Bestelling: ${config.distanceName}`;
      data.type = 'airco-aansluitpakket-bestelling';
      
      try {
        // Show loading state
        const submitButton = e.target.querySelector('button[type="submit"]');
        const originalText = submitButton.innerHTML;
        submitButton.innerHTML = '<span class="flex items-center gap-2"><svg class="animate-spin h-5 w-5" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Verwerken...</span>';
        submitButton.disabled = true;
        
        const response = await fetch('/api/offerte', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
        
        if (response.ok) {
          // Store order data in sessionStorage for payment page
          sessionStorage.setItem('airco-order', JSON.stringify({
            customerName: data.naam,
            customerEmail: data.email,
            customerPhone: data.telefoon || '',
            orderDetails: data.configuration,
            totalAmount: totalPrice,
            orderType: 'Airco Aansluitpakket'
          }));
          
          // Redirect to PayPro payment page
          // Replace with your actual PayPro payment URL/API endpoint
          window.location.href = `/betaling?product=airco-aansluitpakket&amount=${totalPrice}&order=${encodeURIComponent(config.distanceName)}`;
          
        } else {
          throw new Error('Failed to submit');
        }
      } catch (error) {
        console.error('Error:', error);
        alert('Er is een fout opgetreden. Bel ons direct op 06-58980933 of probeer het later opnieuw.');
        // Restore button
        const submitButton = e.target.querySelector('button[type="submit"]');
        submitButton.innerHTML = originalText;
        submitButton.disabled = false;
      }
    });
  </script>
</Layout>
